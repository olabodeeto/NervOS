// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
  // output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(uuid())
  name      String   @default("Anchor")
  email     String   @unique @default("test@anchorsms.com")
  password  String   @default("test1234")
  roleId    String
  role      Role     @relation(fields: [roleId], references: [id])
  createdAt DateTime @default(now())
}

model Role {
  id          String   @id @default(uuid())
  name        String
  permissions String   @db.Text
  schoolId    String // NULL means SuperAdmin/system-wide
  staff       Staff[]
  User        User[]
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  School      School[]

  @@unique([name, schoolId])
}

model Event {
  id          String   @id @default(uuid())
  title       String
  description String
  date        DateTime
  startTime   DateTime
  endTime     DateTime
  host        String
  programs    String   @db.Text
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Subscription {
  id                  String               @id @default(uuid())
  name                String               @unique
  status              Boolean              @default(true)
  duration            Int // duration in months
  price               Float                @default(0.0)
  SchoolSubscriptions SchoolSubscription[]
}

model SchoolSubscription {
  id             String       @id @default(uuid())
  schoolId       String
  startDate      DateTime     @default(now())
  endDate        DateTime
  isActive       Boolean      @default(true)
  school         School       @relation(fields: [schoolId], references: [id])
  subscriptionId String
  subscription   Subscription @relation(fields: [subscriptionId], references: [id])
}

model School {
  id               String   @id @default(uuid())
  name             String
  address          String
  logo             String
  email            String   @unique
  phone            String?
  schoolCode       String   @unique
  password         String
  currentSessionId String?
  currentTermId    String?
  userType         UserType @default(SCHOOL)

  roleId String
  role   Role   @relation(fields: [roleId], references: [id])

  currentSession AcademicSession? @relation("SchoolCurrentSession", fields: [currentSessionId], references: [id])
  currentTerm    Term?            @relation("SchoolCurrentTerm", fields: [currentTermId], references: [id])

  sessions             AcademicSession[]
  terms                Term[]
  staff                Staff[]
  students             Student[]
  classes              SchoolClass[]
  createdAt            DateTime               @default(now())
  isActive             Boolean                @default(true)
  updatedAt            DateTime               @updatedAt
  Otp                  Otp[]
  Guardian             Guardian[]
  GradeScale           GradeScale[]
  LessonAttendance     LessonAttendance[]
  Attendance           Attendance[]
  Grade                Grade[]
  ReportCardDetails    ReportCardDetails[]
  ReportCard           ReportCard[]
  ExamResult           ExamResult[]
  Exam                 Exam[]
  AssignmentSubmission AssignmentSubmission[]
  Assignments          Assignments[]
  Lesson               Lesson[]
  TeachingAssignment   TeachingAssignment[]
  ClassSubject         ClassSubject[]
  Subjects             Subjects[]
  Teacher              Teacher[]
  FeeCategory          FeeCategory[]
  Fee                  Fee[]
  Invoice              Invoice[]
  Payment              Payment[]
  FileStorage          FileStorage[]
  Book                 Book[]
  Announcement         Announcement[]
  Message              Message[]
  Notification         Notification[]
  SchoolSubscription   SchoolSubscription[]
  PortalUser           PortalUser[]
}

model AcademicSession {
  id        String   @id @default(uuid())
  name      String
  startDate DateTime
  endDate   DateTime
  schoolId  String
  school    School   @relation(fields: [schoolId], references: [id])
  terms     Term[]

  // Relation for currentSession in School
  schoolsAsCurrent       School[]                 @relation("SchoolCurrentSession")
  Exam                   Exam[]
  ReportCard             ReportCard[]
  Fee                    Fee[]
  createdAt              DateTime                 @default(now())
  Lesson                 Lesson[]
  Assignments            Assignments[]
  ExamResult             ExamResult[]
  ReportCardDetails      ReportCardDetails[]
  Attendance             Attendance[]
  LessonAttendance       LessonAttendance[]
  Invoice                Invoice[]
  Payment                Payment[]
  Announcement           Announcement[]
  StudentClassEnrollment StudentClassEnrollment[]
  ClassTeacher           ClassTeacher[]
  TeachingAssignment     TeachingAssignment[]
  ClassSubject           ClassSubject[]

  @@unique([name, schoolId])
}

model Term {
  id        String          @id @default(uuid())
  name      String
  startDate DateTime
  endDate   DateTime
  schoolId  String
  school    School          @relation(fields: [schoolId], references: [id])
  sessionId String
  session   AcademicSession @relation(fields: [sessionId], references: [id])

  // Relation for currentTerm in School
  schoolsAsCurrent       School[]                 @relation("SchoolCurrentTerm")
  Lesson                 Lesson[]
  Assignments            Assignments[]
  Exam                   Exam[]
  ExamResult             ExamResult[]
  ReportCard             ReportCard[]
  ReportCardDetails      ReportCardDetails[]
  Attendance             Attendance[]
  LessonAttendance       LessonAttendance[]
  Invoice                Invoice[]
  Payment                Payment[]
  Announcement           Announcement[]
  Fee                    Fee[]
  StudentClassEnrollment StudentClassEnrollment[]

  @@unique([name, schoolId, sessionId])
}

model Staff {
  id        String  @id @default(uuid())
  firstName String
  lastName  String
  email     String  @unique
  phone     String  @unique
  photo     String
  password  String
  roleId    String?
  staffCode String  @unique
  isActive  Boolean @default(true)
  documents String  @db.Text
  address   String

  userType    UserType     @default(STAFF)
  staffType   String
  schoolId    String
  school      School       @relation(fields: [schoolId], references: [id])
  role        Role?        @relation(fields: [roleId], references: [id])
  permissions Permission[]
  isAcademic  Boolean      @default(false) // true = academic staff
  teacher     Teacher?
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
}

model SchoolClass {
  id                     String                   @id @default(uuid())
  name                   String                   @unique
  schoolId               String
  school                 School                   @relation(fields: [schoolId], references: [id])
  ClassTeacher           ClassTeacher[]
  ClassSubject           ClassSubject[]
  TeachingAssignment     TeachingAssignment[]
  Fee                    Fee[]
  Announcement           Announcement[]
  createdAt              DateTime                 @default(now())
  updatedAt              DateTime                 @updatedAt
  StudentClassEnrollment StudentClassEnrollment[]
  level                  String                   @default("Primary")
  capacity               Int                      @default(50)
}

model Subjects {
  id                 String               @id @default(uuid())
  name               String
  subjectCode        String
  ClassSubject       ClassSubject[]
  TeachingAssignment TeachingAssignment[]
  ReportCardDetails  ReportCardDetails[]
  schoolId           String
  school             School               @relation(fields: [schoolId], references: [id])
  createdAt          DateTime             @default(now())
  updatedAt          DateTime             @updatedAt
  level              String               @default("Primary")

  @@unique([name, schoolId, subjectCode, level])
}

model ClassSubject {
  id                 String               @id @default(uuid())
  subjectId          String
  subject            Subjects             @relation(fields: [subjectId], references: [id])
  classId            String
  schoolClass        SchoolClass          @relation(fields: [classId], references: [id])
  schoolId           String
  school             School               @relation(fields: [schoolId], references: [id])
  createdAt          DateTime             @default(now())
  updatedAt          DateTime             @updatedAt
  sessionId          String
  session            AcademicSession      @relation(fields: [sessionId], references: [id])
  TeachingAssignment TeachingAssignment[]

  @@unique([subjectId, classId, schoolId, sessionId])
}

model Teacher {
  id                 String               @id @default(uuid())
  qualification      String
  staffId            String               @unique
  dateAssigned       DateTime             @default(now())
  staff              Staff                @relation(fields: [staffId], references: [id])
  // classes       SchoolClass[]
  ClassTeacher       ClassTeacher[]
  TeachingAssignment TeachingAssignment[]
  Attendance         Attendance[]
  schoolId           String
  school             School               @relation(fields: [schoolId], references: [id])
  createdAt          DateTime             @default(now())
  updatedAt          DateTime             @updatedAt
}

model ClassTeacher {
  roleInClass String
  teacherId   String
  teacher     Teacher         @relation(fields: [teacherId], references: [id])
  classId     String
  schoolClass SchoolClass     @relation(fields: [classId], references: [id])
  createdAt   DateTime        @default(now())
  updatedAt   DateTime        @updatedAt
  sessionId   String
  session     AcademicSession @relation(fields: [sessionId], references: [id])
  isActive    Boolean         @default(true)

  @@id([teacherId, classId])
  @@unique([classId, teacherId, sessionId])
}

model TeachingAssignment {
  id        String  @id @default(uuid())
  teacherId String
  teacher   Teacher @relation(fields: [teacherId], references: [id])

  // classId        String
  // schoolClass    SchoolClass     @relation(fields: [classId], references: [id])
  sessionId      String
  session        AcademicSession @relation(fields: [sessionId], references: [id])
  Lesson         Lesson[]
  Assignments    Assignments[]
  Exam           Exam[]
  schoolId       String
  school         School          @relation(fields: [schoolId], references: [id])
  classSubjectId String
  classSubject   ClassSubject    @relation(fields: [classSubjectId], references: [id])
  createdAt      DateTime        @default(now())
  updatedAt      DateTime        @updatedAt
  SchoolClass    SchoolClass?    @relation(fields: [schoolClassId], references: [id])
  schoolClassId  String?
  Subjects       Subjects?       @relation(fields: [subjectsId], references: [id])
  subjectsId     String?

  isActive Boolean @default(true)

  @@unique([teacherId, classSubjectId, sessionId])
}

model Lesson {
  id                   String             @id @default(uuid())
  teachingAssignmentId String
  teachingAssignment   TeachingAssignment @relation(fields: [teachingAssignmentId], references: [id])
  topic                String
  date                 DateTime
  startTime            DateTime
  endTime              DateTime
  resources            String
  notes                String             @db.Text
  Assignments          Assignments[]
  LessonAttendance     LessonAttendance[]
  schoolId             String
  school               School             @relation(fields: [schoolId], references: [id])
  createdAt            DateTime           @default(now())
  updatedAt            DateTime           @updatedAt

  sessionId String
  session   AcademicSession @relation(fields: [sessionId], references: [id])
  termId    String
  term      Term            @relation(fields: [termId], references: [id])
}

model Assignments {
  id                   String                 @id @default(uuid())
  teachingAssignmentId String
  teachingAssignment   TeachingAssignment     @relation(fields: [teachingAssignmentId], references: [id])
  lessonId             String
  lession              Lesson                 @relation(fields: [lessonId], references: [id])
  title                String
  description          String
  assignedDate         DateTime
  dueDate              DateTime
  resources            String
  AssignmentSubmission AssignmentSubmission[]
  schoolId             String
  school               School                 @relation(fields: [schoolId], references: [id])
  createdAt            DateTime               @default(now())
  updatedAt            DateTime               @updatedAt
  sessionId            String
  session              AcademicSession        @relation(fields: [sessionId], references: [id])
  termId               String
  term                 Term                   @relation(fields: [termId], references: [id])
}

model AssignmentSubmission {
  id                String                 @id @default(uuid())
  assignmentId      String
  assignment        Assignments            @relation(fields: [assignmentId], references: [id])
  studentId         String
  student           Student                @relation(fields: [studentId], references: [id])
  submissionDate    DateTime               @default(now())
  fileUrl           String?
  textAnswer        String?
  score             Int
  feedBack          String
  ReportCardDetails ReportCardDetails[]
  schoolId          String
  school            School                 @relation(fields: [schoolId], references: [id])
  createdAt         DateTime               @default(now())
  updatedAt         DateTime               @updatedAt
  enrollmentId      String
  enrollment        StudentClassEnrollment @relation(fields: [enrollmentId], references: [id])
}

model Exam {
  id                   String             @id @default(uuid())
  teachingAssignmentId String
  teachingAssignment   TeachingAssignment @relation(fields: [teachingAssignmentId], references: [id])
  title                String
  description          String
  examDate             DateTime
  totalMarks           Int

  sessionId  String
  session    AcademicSession @relation(fields: [sessionId], references: [id])
  examType   String
  ExamResult ExamResult[]
  schoolId   String
  school     School          @relation(fields: [schoolId], references: [id])
  createdAt  DateTime        @default(now())
  updatedAt  DateTime        @updatedAt
  termId     String
  term       Term            @relation(fields: [termId], references: [id])
}

model ExamResult {
  id                String                 @id @default(uuid())
  examId            String
  exam              Exam                   @relation(fields: [examId], references: [id])
  studentId         String
  student           Student                @relation(fields: [studentId], references: [id])
  score             Int
  gradeId           String
  grade             Grade                  @relation(fields: [gradeId], references: [id])
  feedback          String
  ReportCardDetails ReportCardDetails[]
  schoolId          String
  school            School                 @relation(fields: [schoolId], references: [id])
  createdAt         DateTime               @default(now())
  updatedAt         DateTime               @updatedAt
  sessionId         String
  session           AcademicSession        @relation(fields: [sessionId], references: [id])
  termId            String
  term              Term                   @relation(fields: [termId], references: [id])
  enrollmentId      String
  enrollment        StudentClassEnrollment @relation(fields: [enrollmentId], references: [id])
}

// report card model
model ReportCard {
  id        String          @id @default(uuid())
  studentId String
  student   Student         @relation(fields: [studentId], references: [id])
  sessionId String
  session   AcademicSession @relation(fields: [sessionId], references: [id])

  enrollmentId String
  enrollment   StudentClassEnrollment @relation(fields: [enrollmentId], references: [id])

  teacherComment    String
  principalComment  String
  overAllGrade      String
  ReportCardDetails ReportCardDetails[]
  schoolId          String
  school            School              @relation(fields: [schoolId], references: [id])
  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt
  termId            String
  term              Term                @relation(fields: [termId], references: [id])
}

// reportcard details model
model ReportCardDetails {
  id                String               @id @default(uuid())
  reportCardId      String
  reportCard        ReportCard           @relation(fields: [reportCardId], references: [id])
  subjectId         String
  subject           Subjects             @relation(fields: [subjectId], references: [id])
  examscoreId       String
  examscore         ExamResult           @relation(fields: [examscoreId], references: [id])
  assignmentScoreId String
  assignmentScore   AssignmentSubmission @relation(fields: [assignmentScoreId], references: [id])
  totalScore        Int
  gradeId           String
  grade             Grade                @relation(fields: [gradeId], references: [id])
  remark            String
  schoolId          String
  school            School               @relation(fields: [schoolId], references: [id])
  createdAt         DateTime             @default(now())
  updatedAt         DateTime             @updatedAt
  sessionId         String
  session           AcademicSession      @relation(fields: [sessionId], references: [id])
  termId            String
  term              Term                 @relation(fields: [termId], references: [id])
}

model GradeScale {
  id          String   @id @default(uuid())
  schoolId    String
  school      School   @relation(fields: [schoolId], references: [id])
  name        String
  description String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @default(now())
  Grade       Grade[]
}

model Grade {
  id                String              @id @default(uuid())
  gradeScaleId      String
  gradeScale        GradeScale          @relation(fields: [gradeScaleId], references: [id])
  letter            String
  minScore          Int
  maxScore          Int
  remark            String
  ReportCardDetails ReportCardDetails[]
  ExamResult        ExamResult[]
  schoolId          String
  school            School              @relation(fields: [schoolId], references: [id])
  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt
}

model Attendance {
  id        String  @id @default(uuid())
  studentId String
  student   Student @relation(fields: [studentId], references: [id])

  enrollmentId String
  enrollment   StudentClassEnrollment @relation(fields: [enrollmentId], references: [id])

  data                DateTime
  recordedByTeacherId String
  teacher             Teacher         @relation(fields: [recordedByTeacherId], references: [id])
  remarks             String
  status              String
  schoolId            String
  school              School          @relation(fields: [schoolId], references: [id])
  createdAt           DateTime        @default(now())
  updatedAt           DateTime        @updatedAt
  sessionId           String
  session             AcademicSession @relation(fields: [sessionId], references: [id])
  termId              String
  term                Term            @relation(fields: [termId], references: [id])
}

model LessonAttendance {
  id        String          @id @default(uuid())
  studentId String
  student   Student         @relation(fields: [studentId], references: [id])
  lessonId  String
  lession   Lesson          @relation(fields: [lessonId], references: [id])
  remarks   String
  status    String
  schoolId  String
  school    School          @relation(fields: [schoolId], references: [id])
  createdAt DateTime        @default(now())
  updatedAt DateTime        @updatedAt
  sessionId String
  session   AcademicSession @relation(fields: [sessionId], references: [id])
  termId    String
  term      Term            @relation(fields: [termId], references: [id])
}

model PortalUser {
  id           String     @id @default(uuid())
  portUserType String
  userType     UserType
  email        String     @unique
  password     String
  Student      Student[]
  Guardian     Guardian[]
  schoolId     String
  school       School     @relation(fields: [schoolId], references: [id])
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
}

model Student {
  id                     String                   @id @default(uuid())
  name                   String
  portalUserId           String
  studentCode            String
  portalUser             PortalUser               @relation(fields: [portalUserId], references: [id])
  schoolId               String
  school                 School                   @relation(fields: [schoolId], references: [id])
  guardianId             String
  guardian               Guardian                 @relation(fields: [guardianId], references: [id])
  AssignmentSubmission   AssignmentSubmission[]
  ExamResult             ExamResult[]
  Attendance             Attendance[]
  LessonAttendance       LessonAttendance[]
  ReportCard             ReportCard[]
  Invoice                Invoice[]
  createdAt              DateTime                 @default(now())
  updatedAt              DateTime                 @updatedAt
  StudentClassEnrollment StudentClassEnrollment[]
}

model StudentClassEnrollment {
  id                   String                 @id @default(uuid())
  studentId            String
  student              Student                @relation(fields: [studentId], references: [id])
  classId              String
  class                SchoolClass            @relation(fields: [classId], references: [id])
  sessionId            String
  session              AcademicSession        @relation(fields: [sessionId], references: [id])
  termId               String?
  term                 Term?                  @relation(fields: [termId], references: [id])
  promoted             Boolean                @default(false) // optional flag
  ExamResult           ExamResult[]
  AssignmentSubmission AssignmentSubmission[]
  ReportCard           ReportCard[]
  Invoice              Invoice[]
  Attendance           Attendance[]
}

model Guardian {
  id           String     @id @default(uuid())
  portalUserId String
  portalUser   PortalUser @relation(fields: [portalUserId], references: [id])
  userType     String
  name         String
  contact      String
  students     Student[]
  schoolId     String
  school       School     @relation(fields: [schoolId], references: [id])
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
}

model Permission {
  id        String   @id @default(uuid())
  name      String
  staff     Staff[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Otp {
  id        String   @id @default(uuid())
  code      String
  userId    String // UUID of the user (staff/student/parent/school)
  userType  UserType // Enum to indicate which model this OTP is for
  schoolId  String
  school    School   @relation(fields: [schoolId], references: [id], onDelete: Cascade)
  expiresAt DateTime
  createdAt DateTime @default(now())
}

model AuditTrail {
  id          String   @id @default(uuid())
  actorId     String?
  actorName   String
  actorRole   String?
  action      String?
  module      String?
  description String?
  ipAddress   String?
  userAgent   String?
  schoolId    String? // NULL means SuperAdmin/system-wide
  createdAt   DateTime @default(now())
}

//====== finance =============

model FeeCategory {
  id        String   @id @default(uuid())
  name      String
  schoolId  String
  school    School   @relation(fields: [schoolId], references: [id])
  fees      Fee[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Fee {
  id            String          @id @default(uuid())
  name          String
  amount        Decimal
  sessionId     String
  session       AcademicSession @relation(fields: [sessionId], references: [id])
  feeCategoryId String
  feeCategory   FeeCategory     @relation(fields: [feeCategoryId], references: [id])
  classId       String? // if null, itâ€™s for all classes
  schoolClass   SchoolClass?    @relation(fields: [classId], references: [id])
  schoolId      String
  school        School          @relation(fields: [schoolId], references: [id])
  invoices      Invoice[]
  createdAt     DateTime        @default(now())
  updatedAt     DateTime        @updatedAt
  termId        String?
  term          Term?           @relation(fields: [termId], references: [id])
  InvoiceItem   InvoiceItem[]
}

model Invoice {
  id        String  @id @default(uuid())
  studentId String
  student   Student @relation(fields: [studentId], references: [id])

  enrollmentId String
  enrollment   StudentClassEnrollment @relation(fields: [enrollmentId], references: [id])
  feeId        String
  fee          Fee                    @relation(fields: [feeId], references: [id])
  amount       Decimal
  status       String // "pending", "paid", "partial"
  payments     Payment[]
  schoolId     String
  school       School                 @relation(fields: [schoolId], references: [id])
  createdAt    DateTime               @default(now())
  updatedAt    DateTime               @updatedAt
  sessionId    String
  session      AcademicSession        @relation(fields: [sessionId], references: [id])
  termId       String
  term         Term                   @relation(fields: [termId], references: [id])
  InvoiceItem  InvoiceItem[]
}

model InvoiceItem {
  id        String  @id @default(uuid())
  feeId     String
  fee       Fee     @relation(fields: [feeId], references: [id])
  invoiceId String
  invoice   Invoice @relation(fields: [invoiceId], references: [id])
  amount    Decimal
}

model Payment {
  id        String          @id @default(uuid())
  invoiceId String
  invoice   Invoice         @relation(fields: [invoiceId], references: [id])
  amount    Decimal
  method    String // cash, bank transfer, card, etc.
  date      DateTime
  schoolId  String
  school    School          @relation(fields: [schoolId], references: [id])
  createdAt DateTime        @default(now())
  updatedAt DateTime        @updatedAt
  sessionId String
  session   AcademicSession @relation(fields: [sessionId], references: [id])
  termId    String
  term      Term            @relation(fields: [termId], references: [id])
}

model FileStorage {
  id                 String   @id @default(uuid())
  name               String
  fileType           String
  schoolId           String
  school             School   @relation(fields: [schoolId], references: [id])
  uploadedById       String
  uploadedByUserType String
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
}

model Book {
  id        String   @id @default(uuid())
  title     String
  author    String
  pages     Int
  link      String
  createdAt DateTime @default(now())
  schoolId  String
  school    School   @relation(fields: [schoolId], references: [id])
  updatedAt DateTime @updatedAt
}

model Announcement {
  id            String          @id @default(uuid())
  title         String
  message       String
  audience      AudienceType
  classId       String?
  schoolClass   SchoolClass?    @relation(fields: [classId], references: [id])
  createdByType CreatorType
  createdById   String? // can point to Staff.id or School.id depending on type
  schoolId      String
  school        School          @relation(fields: [schoolId], references: [id])
  createdAt     DateTime        @default(now())
  updatedAt     DateTime        @updatedAt
  sessionId     String
  session       AcademicSession @relation(fields: [sessionId], references: [id])
  termId        String
  term          Term            @relation(fields: [termId], references: [id])
}

model Message {
  id       String @id @default(uuid())
  schoolId String
  school   School @relation(fields: [schoolId], references: [id])

  senderId     String
  senderType   UserType
  receiverId   String
  receiverType UserType

  content   String
  read      Boolean  @default(false)
  createdAt DateTime @default(now())
}

model Notification {
  id         String                  @id @default(uuid())
  schoolId   String
  school     School                  @relation(fields: [schoolId], references: [id])
  type       NotificationType
  title      String
  message    String
  link       String?
  createdAt  DateTime                @default(now())
  recipients NotificationRecipient[]
  updatedAt  DateTime                @updatedAt
}

model NotificationRecipient {
  id             String       @id @default(uuid())
  notificationId String
  notification   Notification @relation(fields: [notificationId], references: [id])

  recipientId   String
  recipientType UserType
  read          Boolean   @default(false)
  readAt        DateTime?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
}

enum UserType {
  STAFF
  STUDENT
  PARENT
  SCHOOL
  USER
}

enum NotificationType {
  GENERAL // e.g., "School will be closed tomorrow"
  ASSIGNMENT_DUE // e.g., "Math assignment is due in 2 days"
  EXAM_RESULT // e.g., "Your Physics exam results are available"
  PAYMENT_REMINDER // e.g., "Tuition payment due by next week"
  MESSAGE // e.g., "You received a message from your teacher"
}

enum CreatorType {
  STAFF
  SCHOOL
  SYSTEM
}

enum AudienceType {
  ALL
  STUDENTS
  PARENTS
  STAFF
  CLASS
}

enum StaffType {
  ACADEMIC
  NON_ACADEMIC
}

enum ClassRole {
  CLASS_TEACHER
  ASSISTANT_TEACHER
  SUBJECT_TEACHER
}
